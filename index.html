<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AG China Kompetenz - Experten für China</title>
    <meta name="description" content="Arbeitsgruppe China-Kompetenz - Ihr Partner für China-Expertise, Beratung und interkulturelle Kompetenz">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        .loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="loading" id="loading">
        <h2>AG China Kompetenz</h2>
        <p>Seite wird geladen...</p>
    </div>
    
    <iframe id="contentFrame" 
            src="https://chinaconsult.eu" 
            title="China Competence"
            style="display: none;"
            allowfullscreen>
    </iframe>

    <script>
    (function() {
        var iframe = document.getElementById('contentFrame');
        var loading = document.getElementById('loading');
        
        function getTargetUrl() {
            var baseUrl = 'https://chinaconsult.eu';
            var path = window.location.pathname;
            var search = window.location.search;
            var hash = window.location.hash;
            
            if (path && path !== '/' && path !== '/index.html') {
                var page = path.substring(1).replace('.html', '');
                return baseUrl + '/app.php?page=' + page;
            }
            
            if (hash && hash.includes('page=')) {
                var hashParams = hash.substring(1);
                return baseUrl + '/app.php?' + hashParams;
            }
            
            if (search) {
                return baseUrl + '/app.php' + search;
            }
            
            return baseUrl;
        }
        
        iframe.src = getTargetUrl();
        
        iframe.onload = function() {
            loading.style.display = 'none';
            iframe.style.display = 'block';
        };
        
        window.addEventListener('message', function(e) {
            if (e.origin !== 'https://chinaconsult.eu') return;
            
            if (e.data && e.data.type === 'urlUpdate') {
                var newPath = e.data.path;
                var newUrl = window.location.origin + newPath;
                window.history.pushState({}, '', newUrl);
            }
        });
        
        window.addEventListener('popstate', function() {
            iframe.src = getTargetUrl();
        });
    })();
    </script>
</body>
</html>
